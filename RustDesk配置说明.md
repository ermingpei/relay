# RustDesk 远程桌面配置说明

## 服务器信息
- **服务器地址**: 34.96.199.184
- **公钥**: `mzhrEkxv82h+9AVvfV3igJgyGxowvSdrc5zSZ7aNQ+o=`
- **更新日期**: 2026年1月3日

> 💡 如需更新Key，请查看 `RustDesk_Key更新指南.md`

---

## 一、加拿大电脑配置（被控端）

### 1. 下载安装 RustDesk
- 访问官网: https://rustdesk.com/zh/
- 下载适合您操作系统的版本（Windows/Mac/Linux）
- 安装并启动 RustDesk

### 2. 配置中继服务器
1. 打开 RustDesk 客户端
2. 点击右上角的 **三个点菜单** (⋮)
3. 选择 **"设置"**
4. 点击左侧的 **"网络"** 选项卡
5. 在 **"ID服务器"** 栏填入: `34.96.199.184`
6. 在 **"中继服务器"** 栏填入: `34.96.199.184`
7. 在 **"Key"** 栏填入: `mzhrEkxv82h+9AVvfV3igJgyGxowvSdrc5zSZ7aNQ+o=`
8. 点击 **"确定"** 保存设置

### 3. 记录您的 ID
- 配置完成后，RustDesk 主界面会显示一个 **9位数字的 ID**
- **请记下这个 ID**，稍后在中国电脑上需要使用
- 例如: `123 456 789`

### 4. 设置密码（可选但推荐）
- 在主界面的 **"密码"** 栏设置一个固定密码
- 这样每次连接时不需要手动接受
- 建议设置一个强密码以保证安全

### 5. 配置无人值守访问（推荐）
无人值守访问允许您在加拿大电脑无人操作时也能远程连接。

1. 点击主界面左下角的 **"接受"** 按钮旁边的 **锁图标**
2. 或者点击菜单 → **"设置"** → **"安全"**
3. 找到 **"无人值守访问"** 部分
4. 设置一个 **永久密码**（与临时密码不同）
5. 勾选 **"启用无人值守访问"**
6. 可选设置：
   - **"启用直接IP访问"**: 如果网络允许，可以提高连接速度
   - **"启用键盘/鼠标"**: 允许远程控制键盘鼠标
   - **"启用剪贴板"**: 允许复制粘贴
   - **"启用文件传输"**: 允许传输文件
   - **"启用音频"**: 允许音频传输

### 6. 权限设置
1. 在 **"设置"** → **"安全"** 中
2. 配置以下权限（根据需要）：
   - ✓ **键盘控制** - 允许远程输入
   - ✓ **鼠标控制** - 允许远程操作鼠标
   - ✓ **剪贴板同步** - 允许复制粘贴
   - ✓ **文件传输** - 允许上传下载文件
   - ✓ **音频捕获** - 允许传输系统音频
   - ✓ **重启远程设备** - 允许远程重启（谨慎开启）
   - ⚠️ **禁用远程输入** - 如果勾选，被控端无法使用键盘鼠标

### 7. 开机自启动（推荐）
确保电脑重启后 RustDesk 自动运行：

**Windows**:
1. 按 `Win + R`，输入 `shell:startup`
2. 将 RustDesk 快捷方式复制到打开的文件夹

**Mac**:
1. 系统偏好设置 → 用户与群组 → 登录项
2. 点击 `+` 添加 RustDesk

**Linux**:
1. 设置 → 应用程序 → 启动应用程序
2. 添加 RustDesk

---

## 二、中国电脑配置（控制端）

### 1. 下载安装 RustDesk
- 访问官网: https://rustdesk.com/zh/
- 下载适合您操作系统的版本（Windows/Mac/Linux）
- 安装并启动 RustDesk

### 2. 配置中继服务器（与加拿大电脑相同）
1. 打开 RustDesk 客户端
2. 点击右上角的 **三个点菜单** (⋮)
3. 选择 **"设置"**
4. 点击左侧的 **"网络"** 选项卡
5. 在 **"ID服务器"** 栏填入: `34.96.199.184`
6. 在 **"中继服务器"** 栏填入: `34.96.199.184`
7. 在 **"Key"** 栏填入: `mzhrEkxv82h+9AVvfV3igJgyGxowvSdrc5zSZ7aNQ+o=`
8. 点击 **"确定"** 保存设置

### 3. 连接到加拿大电脑
1. 在 RustDesk 主界面的 **"远程ID"** 输入框中
2. 输入加拿大电脑的 **9位数字 ID**（例如: `123 456 789`）
3. 点击 **"连接"** 按钮
4. 如果加拿大电脑设置了密码，输入密码
5. 如果没有设置密码，需要在加拿大电脑上点击 **"接受"**

---

## 三、连接状态说明

### 正常状态
- 两台电脑的 RustDesk 都应该显示 **"就绪"** 状态
- 如果显示 **"就绪"**，说明已成功连接到中继服务器

### 异常状态
如果显示其他状态（如"未就绪"），请检查：
1. 网络连接是否正常
2. 服务器地址和密钥是否填写正确
3. 防火墙是否阻止了 RustDesk

---

## 四、音频设置（重要）

为了确保音频传输稳定：

### 在中国电脑（控制端）
1. 连接成功后，点击连接窗口顶部的工具栏
2. 找到 **"音频"** 图标并点击
3. 确保音频已启用
4. 如果音频卡顿，可以尝试：
   - 降低画质设置（点击"显示"图标调整）
   - 关闭不必要的应用程序

### 在加拿大电脑（被控端）
1. 确保系统音频设备正常工作
2. 检查音量设置
3. 建议使用有线网络连接以获得更稳定的性能

---

## 五、性能优化建议

### 网络优化
- **加拿大电脑**: 尽量使用有线网络（以太网）而非 WiFi
- **中国电脑**: 选择网络状况良好的时段使用
- 关闭其他占用带宽的应用（如下载、视频播放等）

### 画质设置
1. 在连接窗口点击 **"显示"** 图标
2. 根据网络情况调整画质：
   - 网络好: 选择 **"高质量"**
   - 网络一般: 选择 **"平衡"**
   - 网络差: 选择 **"低质量"** 或 **"自适应"**

### 帧率设置
- 如果不需要流畅的视频播放，可以降低帧率以节省带宽
- 这样可以让音频传输更加稳定

---

## 六、常见问题

### Q1: 无法连接到服务器
**解决方法**:
- 检查服务器地址是否正确: `34.96.199.184`
- 检查密钥是否完整复制（包括末尾的 `=` 号）
- 尝试重启 RustDesk 客户端

### Q2: 连接速度很慢
**解决方法**:
- 降低画质和帧率设置
- 检查本地网络连接
- 避免在网络高峰期使用

### Q3: 音频断断续续
**解决方法**:
- 降低视频画质，优先保证音频
- 关闭视频传输，只使用音频
- 检查两端的网络稳定性

### Q4: 找不到对方的 ID
**解决方法**:
- 确保两台电脑都配置了相同的服务器地址和密钥
- 确保两台电脑都显示"就绪"状态
- 重启 RustDesk 客户端后重试

---

## 七、安全最佳实践

### 密码安全
1. **使用强密码**
   - 至少 12 位字符
   - 包含大小写字母、数字和特殊符号
   - 不要使用生日、姓名等容易猜测的密码
   - 示例: `Rd@2025!Secure#99`

2. **分离临时密码和永久密码**
   - 临时密码：用于偶尔的远程协助
   - 永久密码（无人值守）：用于常规远程访问
   - 两个密码应该不同

3. **定期更换密码**
   - 建议每 3-6 个月更换一次
   - 如果怀疑密码泄露，立即更换

### 访问控制
1. **IP 白名单（高级）**
   - 在设置中可以限制只允许特定 IP 连接
   - 适合固定 IP 的场景

2. **连接审批**
   - 对于重要操作，可以暂时禁用无人值守
   - 需要手动接受连接请求

3. **会话记录**
   - 定期检查连接历史记录
   - 路径：设置 → 安全 → 连接日志
   - 如发现异常连接，立即调查

### 网络安全
1. **使用加密连接**
   - RustDesk 默认使用端到端加密
   - 确保使用的是官方服务器密钥

2. **防火墙设置**
   - 不要在公共 WiFi 下使用无人值守访问
   - 使用 VPN 可以增加额外的安全层

3. **服务器安全**
   - 我们的中继服务器已配置防火墙规则
   - 只开放必要的端口（21115-21119）

### 权限管理
1. **最小权限原则**
   - 只开启必要的权限
   - 如果不需要文件传输，就不要启用
   - 如果不需要重启权限，就不要开启

2. **屏幕隐私**
   - 可以设置"隐私模式"，连接时黑屏
   - 路径：连接时点击工具栏 → 隐私模式
   - 防止被控端屏幕内容被他人看到

3. **会话超时**
   - 设置自动断开空闲连接
   - 路径：设置 → 安全 → 自动断开

### 物理安全
1. **锁定被控端电脑**
   - 离开时锁定 Windows（Win+L）或 Mac（Cmd+Ctrl+Q）
   - 防止他人物理访问

2. **关闭显示器**
   - 如果不希望他人看到远程操作
   - 可以关闭被控端显示器

### 数据安全
1. **敏感操作注意事项**
   - 不要在远程会话中输入银行密码等敏感信息
   - 除非确认连接安全且加密

2. **文件传输**
   - 传输敏感文件后，及时删除传输记录
   - 不要传输未加密的敏感文档

3. **剪贴板清理**
   - 远程会话结束后，清空剪贴板
   - 防止敏感信息残留

### 应急响应
1. **发现异常连接时**
   - 立即断开所有连接
   - 更改所有密码（临时+永久）
   - 检查连接日志
   - 必要时重新生成 ID

2. **紧急禁用远程访问**
   - 设置 → 安全 → 禁用所有传入连接
   - 或直接退出 RustDesk 程序

3. **服务器端控制**
   - 如需完全禁用，可以停止服务器服务
   - 联系管理员处理

---

## 八、使用最佳实践

### 日常使用建议
1. **连接前检查**
   - 确认两端都显示"就绪"状态
   - 检查网络连接质量
   - 确认被控端电脑已开机

2. **连接中优化**
   - 根据网络情况调整画质
   - 不需要时关闭视频，只用音频
   - 避免同时传输大文件
   - 关闭不必要的应用程序

3. **连接后清理**
   - 断开连接前关闭敏感文档
   - 清空剪贴板
   - 检查是否有残留的临时文件

### 文件传输技巧
1. **使用文件传输功能**
   - 点击工具栏的"文件"图标
   - 可以在两台电脑间传输文件
   - 支持拖拽上传/下载

2. **大文件传输**
   - 建议使用其他工具（如云盘）传输大文件
   - RustDesk 适合传输小文件和文档

3. **传输安全**
   - 传输敏感文件前确认连接加密
   - 传输完成后验证文件完整性

### 多设备管理
1. **地址簿功能**
   - 点击主界面的"地址簿"
   - 可以保存常用的远程 ID
   - 支持分组管理多台电脑

2. **标签和备注**
   - 为每台电脑添加易识别的名称
   - 例如："加拿大-办公室电脑"

3. **快速连接**
   - 保存常用连接配置
   - 一键快速连接

### 性能监控
1. **连接质量指标**
   - 延迟（Ping）：< 200ms 为佳
   - 帧率：15-30 fps 为正常
   - 带宽使用：根据画质调整

2. **网络测试**
   - 使用前可以先 ping 服务器
   - `ping 34.96.199.184`
   - 延迟越低，体验越好

### 故障排查流程
1. **无法连接时**
   ```
   步骤 1: 检查网络连接
   步骤 2: 确认服务器配置正确
   步骤 3: 重启 RustDesk 客户端
   步骤 4: 检查防火墙设置
   步骤 5: 查看连接日志
   ```

2. **连接卡顿时**
   ```
   步骤 1: 降低画质和帧率
   步骤 2: 关闭其他占用带宽的程序
   步骤 3: 切换到有线网络
   步骤 4: 避开网络高峰期
   ```

3. **音频问题时**
   ```
   步骤 1: 检查系统音频设备
   步骤 2: 调整 RustDesk 音频设置
   步骤 3: 降低视频质量优先音频
   步骤 4: 重启音频服务
   ```

### 备份和恢复
1. **配置备份**
   - 定期备份 RustDesk 配置
   - Windows: `%AppData%\RustDesk\`
   - Mac: `~/Library/Application Support/RustDesk/`
   - Linux: `~/.config/rustdesk/`

2. **ID 和密钥保存**
   - 将 ID 和服务器配置保存到安全位置
   - 建议使用密码管理器

3. **重装系统后恢复**
   - 重新安装 RustDesk
   - 恢复配置文件
   - 重新配置服务器信息

### 团队协作建议
1. **多人访问管理**
   - 为不同用户设置不同的访问权限
   - 使用地址簿共享功能

2. **访问日志审计**
   - 定期检查谁访问了系统
   - 记录重要操作

3. **权限分级**
   - 普通用户：只读访问
   - 管理员：完全控制
   - 临时访问：限时密码

---

## 九、高级配置（可选）

### 自定义服务器端口
如果默认端口被封锁，可以联系管理员修改服务器端口配置。

### 代理设置
如果需要通过代理访问：
1. 设置 → 网络 → 代理
2. 配置 SOCKS5 或 HTTP 代理

### 命令行使用
RustDesk 支持命令行参数，适合自动化脚本：
```bash
# 直接连接到指定 ID
rustdesk --connect <ID>

# 使用指定密码连接
rustdesk --connect <ID> --password <密码>
```

### API 集成
RustDesk 提供 API 接口，可以集成到自己的系统中。

---

## 十、技术支持

### 官方资源
1. 官方文档: https://rustdesk.com/docs/
2. GitHub 仓库: https://github.com/rustdesk/rustdesk
3. 社区论坛: https://github.com/rustdesk/rustdesk/discussions

### 服务器状态检查
```bash
# 检查服务器服务状态
ssh 34.96.199.184 -l qubitrhythm "sudo systemctl status hbbs hbbr"

# 查看服务器日志
ssh 34.96.199.184 -l qubitrhythm "sudo journalctl -u hbbs -u hbbr -n 50"
```

### 常用诊断命令
```bash
# 测试服务器连接
ping 34.96.199.184

# 测试端口是否开放
telnet 34.96.199.184 21116
telnet 34.96.199.184 21117

# Windows 用户使用
Test-NetConnection 34.96.199.184 -Port 21116
```

---

## 附录：快速参考卡

### 服务器信息
```
服务器地址: 34.96.199.184
公钥: mzhrEkxv82h+9AVvfV3igJgyGxowvSdrc5zSZ7aNQ+o=
ID 服务器端口: 21116
中继服务器端口: 21117
```

### 常用快捷键
- `Ctrl + Alt + Del`: 发送到远程电脑
- `Ctrl + Alt + F`: 全屏/退出全屏
- `Ctrl + Alt + T`: 文件传输
- `Ctrl + Alt + C`: 聊天窗口
- `Ctrl + Alt + Q`: 断开连接

### 推荐密码强度
- ✓ 优秀: `Rd@2025!Secure#99Cn`
- ✓ 良好: `MyPass2025!@#`
- ⚠️ 一般: `Password123`
- ✗ 弱: `123456`

---

**配置完成后，您就可以安全、稳定地从中国远程控制加拿大的电脑了！**

记住：安全第一，定期检查和更新配置！
